{"version":3,"sources":["scripts/main.js"],"names":["table","document","querySelector","tableBody","sortExample","currentSortParam","listSorting","list","sortParam","listEmployees","slice","sort","a","b","switchForListSorting","salaryToNumber","salary","split","join","cells","innerText","localeCompare","addEventListener","e","employees","querySelectorAll","target","closest","employeesSorted","map","row","cell","i","forEach","index","length","tr","activeRow","classList","contains","remove","toggle","insertAdjacentHTML","form","addPersonToTable","employee","errorMessage","showError","get","pushNotification","capitalize","formatSalary","Intl","NumberFormat","format","string","word","toUpperCase","calculateCoordsForMessage","notification","coordsMessage","coords","getBoundingClientRect","x","window","pageXOffset","y","bottom","pageYOffset","formData","FormData","preventDefault","reset","title","description","type","latency","body","message","style","top","left","zIndex","setTimeout","removeElem","moveMessage","heightPrevElem","elem","elemHeight","offsetHeight","typeInput","cellContent","nameCell","cellSizes","getComputedStyle","cellWidth","clientWidth","parseInt","paddingLeft","paddingRight","createFormInCell","formCell","cellInput","formatCell","callErrorMessage","data","eFormCell","stopPropagation","width","focus","eKey","key"],"mappings":"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","file":"main.2983a0a6.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nconst table = document.querySelector('table');\nconst tableBody = table.querySelector('tbody');\n\nlet sortExample = 1;\nlet currentSortParam = '';\n\ntable.addEventListener('click', (e) => {\n  const employees = document.querySelectorAll('tr');\n  const sortParam = e.target.closest('th').innerText;\n\n  if (sortParam) {\n    const employeesSorted = [...listSorting(employees, sortParam)]\n      .map(row => [...row.cells].map(cell => cell.innerText));\n\n    for (let i = 1; i < employees.length - 1; i++) {\n      [...employees[i].cells].forEach((cell, index) => {\n        cell.innerText = employeesSorted[i - 1][index];\n      });\n    }\n  }\n});\n\nfunction listSorting(list, sortParam) {\n  const listEmployees = [...list].slice(1, -1);\n\n  if (currentSortParam === sortParam) {\n    sortExample = (sortExample) ? 0 : 1;\n  } else {\n    sortExample = 0;\n    currentSortParam = sortParam;\n  }\n\n  return listEmployees.sort((a, b) => {\n    return (sortExample)\n      ? switchForListSorting(sortParam, b, a)\n      : switchForListSorting(sortParam, a, b);\n  });\n};\n\nfunction salaryToNumber(salary) {\n  return +salary.slice(1).split(',').join('');\n};\n\nfunction switchForListSorting(sortParam, a, b) {\n  switch (sortParam) {\n    case 'Age':\n      return +a.cells[3].innerText - +b.cells[3].innerText;\n\n    case 'Salary':\n      return salaryToNumber(a.cells[4].innerText)\n        - salaryToNumber(b.cells[4].innerText);\n\n    case 'Name':\n      return (a.cells[0].innerText).localeCompare(b.cells[0].innerText);\n\n    case 'Position':\n      return (a.cells[1].innerText).localeCompare(b.cells[1].innerText);\n\n    case 'Office':\n      return (a.cells[2].innerText).localeCompare(b.cells[2].innerText);\n  }\n}\n\ntableBody.addEventListener('click', (e) => {\n  const tr = e.target.closest('tr');\n  const activeRow = document.querySelectorAll('.active');\n\n  if (!tr.classList.contains('active')) {\n    activeRow.forEach(row => {\n      row.classList.remove('active');\n    });\n  }\n\n  tr.classList.toggle('active');\n});\n\ntable.insertAdjacentHTML('afterend', `\n  <form class=\"new-employee-form\">\n    <label>Name: \n      <input data-qa=\"name\" name=\"name\" type=\"text\" required>\n    </label>\n\n    <label>Position: \n      <input data-qa=\"position\" name=\"position\" type=\"text\" required>\n    </label>\n\n    <label>Office: \n      <select data-qa=\"office\" name=\"office\" type=\"text\">\n        <option value=\"Tokyo\">Tokyo</option>\n        <option value=\"Singapore\">Singapore</option>\n        <option value=\"London\">London</option>\n        <option value=\"New York\">New York</option>\n        <option value=\"Edinburgh\">Edinburgh</option>\n        <option value=\"San Francisco\">San Francisco</option>\n      </select>\n    </label>\n\n    <label>Age: \n      <input data-qa=\"age\" name=\"age\" type=\"number\" required>\n    </label>\n\n    <label>Salary: \n      <input data-qa=\"salary\" name=\"salary\" type=\"number\" required>\n    </label>\n\n    <button>Save to table</button>\n  </form>\n`);\n\nconst form = document.querySelector('.new-employee-form');\n\nform.addEventListener('submit', (e) => {\n  const formData = new FormData(form);\n\n  e.preventDefault();\n  addPersonToTable(formData);\n  e.target.reset();\n});\n\nfunction addPersonToTable(employee) {\n  let errorMessage = '';\n  const succesMessage = 'All data entered successfully! Added a new employee.';\n  let showError = false;\n\n  if (employee.get('name').length < 4) {\n    errorMessage += 'Name must have not less than 4 letters!<br><br>';\n    showError = true;\n  }\n\n  if (+employee.get('age') < 18 || +employee.get('age') > 90) {\n    errorMessage += ' Age must be not less than 18 years old'\n      + ' or less than 90 years old!<br><br>';\n    showError = true;\n  }\n\n  if (+employee.get('salary') < 0) {\n    errorMessage += 'Salary cannot be negative!';\n    showError = true;\n  }\n\n  if (showError) {\n    pushNotification('Error!', errorMessage, 'error', 8000);\n\n    return;\n  }\n\n  pushNotification('Success!', succesMessage, 'success', 4000);\n\n  tableBody.insertAdjacentHTML('beforeend', `\n    <tr>\n      <td>\n        ${capitalize(employee.get('name'))}\n      </td>\n\n      <td>\n        ${capitalize(employee.get('position'))}\n      </td>\n\n      <td>\n        ${employee.get('office')}\n      </td>\n\n      <td>\n        ${employee.get('age')}\n      </td>\n\n      <td>\n        ${formatSalary(employee.get('salary'))}\n      </td>\n    </tr>\n  `);\n}\n\nfunction formatSalary(salary) {\n  return '$' + new Intl.NumberFormat('en-GB').format(salary);\n}\n\nfunction capitalize(string) {\n  return string\n    .split(' ')\n    .map(word => word.slice(0, 1).toUpperCase() + word.slice(1))\n    .join(' ');\n}\n\nfunction calculateCoordsForMessage() {\n  const notification = document.querySelector('.notification');\n  const coordsMessage = {};\n  let target = form;\n\n  if (notification) {\n    target = notification;\n  }\n\n  const coords = target.getBoundingClientRect();\n\n  coordsMessage.x = coords.x + window.pageXOffset;\n  coordsMessage.y = coords.bottom + 15 + window.pageYOffset;\n\n  return coordsMessage;\n}\n\nconst pushNotification = (title, description, type, latency) => {\n  const body = document.body;\n  const coords = calculateCoordsForMessage();\n\n  body.insertAdjacentHTML('afterbegin', `\n    <div data-qa=\"notification\" class=\"notification ${type}\">\n      <h2 class=\"title\">\n        ${title}\n      </h2>\n      <p>\n        ${description}\n      </p>\n    </div>\n  `);\n\n  const message = document.querySelector('.notification');\n\n  message.style.top = coords.y + 'px';\n  message.style.left = coords.x + 'px';\n  message.style.zIndex = 1;\n\n  setTimeout(removeElem, latency, message);\n};\n\nfunction moveMessage(heightPrevElem) {\n  const messages = document.querySelectorAll('.notification');\n\n  messages.forEach(message => {\n    const coords = message.getBoundingClientRect();\n\n    message.style.top = coords.y - heightPrevElem - 15 + 'px';\n  });\n}\n\nfunction removeElem(elem) {\n  const elemHeight = elem.offsetHeight;\n\n  elem.remove();\n  moveMessage(elemHeight);\n}\n\ntable.addEventListener('dblclick', (e) => {\n  const cell = e.target.closest('td');\n  const row = e.target.closest('tr');\n  let typeInput = '';\n  const cellContent = cell.innerText;\n  let nameCell = '';\n  const cellSizes = getComputedStyle(cell);\n  const cellWidth = cell.clientWidth\n    - parseInt(cellSizes.paddingLeft) - parseInt(cellSizes.paddingRight);\n\n  cell.innerText = '';\n\n  switch (cell) {\n    case row.cells[0]:\n      nameCell = 'name';\n      typeInput = 'text';\n      break;\n\n    case row.cells[1]:\n      nameCell = 'position';\n      typeInput = 'text';\n      break;\n\n    case row.cells[2]:\n      nameCell = 'office';\n      typeInput = 'text';\n      break;\n\n    case row.cells[3]:\n      nameCell = 'age';\n      typeInput = 'number';\n      break;\n\n    case row.cells[4]:\n      nameCell = 'salary';\n      typeInput = 'number';\n      break;\n  }\n\n  function createFormInCell() {\n    cell.insertAdjacentHTML('afterbegin', `\n      <form id=\"format-cell\">\n        <input class=\"cell-input\" name=\"${nameCell}\" type=\"${typeInput}\">\n      </form>\n    `);\n  }\n\n  let errorMessage = '';\n\n  switch (nameCell) {\n    case 'name':\n      errorMessage = 'Name must have not less than 4 letters!';\n\n      pushNotification('Worning!', errorMessage, 'worning', 4000);\n      createFormInCell();\n      break;\n\n    case 'position':\n      createFormInCell();\n      break;\n\n    case 'age':\n      errorMessage = 'Age must be not less than 18 years'\n        + ' old or less than 90 years old!';\n\n      pushNotification('Worning!', errorMessage, 'worning', 4000);\n      createFormInCell();\n      break;\n\n    case 'salary':\n      errorMessage = 'Salary cannot be negative!';\n\n      pushNotification('Worning!', errorMessage, 'worning', 4000);\n      createFormInCell();\n      break;\n\n    case 'office':\n      cell.insertAdjacentHTML('afterbegin', `\n        <form id=\"format-cell\">\n          <select class=\"cell-input\" name=\"office\" type=\"text\">\n            <option value=\"Tokyo\">Tokyo</option>\n            <option value=\"Singapore\">Singapore</option>\n            <option value=\"London\">London</option>\n            <option value=\"New York\">New York</option>\n            <option value=\"Edinburgh\">Edinburgh</option>\n            <option value=\"San Francisco\">San Francisco</option>\n          </select>\n        </form>\n      `);\n      break;\n  }\n\n  const formCell = document.querySelector('#format-cell');\n  const cellInput = document.querySelector('.cell-input');\n\n  formCell.addEventListener('dblclick', (eFormCell) => {\n    eFormCell.stopPropagation();\n  });\n\n  cellInput.style.width = cellWidth + 'px';\n  cellInput.focus();\n\n  cellInput.addEventListener('blur', () => {\n    formatCell();\n  });\n\n  cellInput.addEventListener('keydown', (eKey) => {\n    if (eKey.key === 'Enter') {\n      formatCell();\n    }\n  });\n\n  if (nameCell === 'office') {\n    cellInput.addEventListener('change', () => {\n      formatCell();\n    });\n  }\n\n  function formatCell() {\n    const formData = new FormData(formCell);\n\n    function callErrorMessage(message) {\n      formCell.remove();\n\n      pushNotification('Error!', message, 'error', 4000);\n\n      cell.innerText = cellContent;\n    }\n\n    if (nameCell === 'salary' && formData.get(nameCell) < 0) {\n      callErrorMessage(errorMessage);\n\n      return;\n    }\n\n    if (nameCell === 'name' && formData.get(nameCell).length < 4) {\n      callErrorMessage(errorMessage);\n\n      return;\n    }\n\n    if (\n      nameCell === 'age'\n      && (+formData.get(nameCell) < 18 || +formData.get(nameCell) > 90)\n    ) {\n      callErrorMessage(errorMessage);\n\n      return;\n    }\n\n    const data = (nameCell === 'salary')\n      ? formatSalary(formData.get(nameCell))\n      : formData.get(nameCell);\n\n    if (formData.get(nameCell) === '') {\n      cell.innerText = cellContent;\n    } else {\n      cell.innerText = data;\n    }\n  }\n});\n"]}